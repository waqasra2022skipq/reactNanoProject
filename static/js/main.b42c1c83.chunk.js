(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(11),r=n.n(s),o=(n(16),n(6)),i=n.n(o),l=n(9),h=n(4),d=(n(18),n(1)),j=function(e){var t=e.book;console.log();var n=void 0===t.authors?[]:t.authors,c=void 0===t.imageLinks?{thumbnail:""}:t.imageLinks;return Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'+c.thumbnail+'")'}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:function(n){""!==n.target.value&&(t.shelf=n.target.value,e.changeShelf(t))},defaultValue:t.shelf,children:[Object(d.jsx)("option",{value:"",disabled:!0,children:"Move to..."}),Object(d.jsx)("option",{value:"currentlyReading",disabled:"currentlyReading"===t.shelf,children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",disabled:"wantToRead"===t.shelf,children:"Want to Read"}),Object(d.jsx)("option",{value:"read",disabled:"read"===t.shelf,children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:t.title}),Object(d.jsx)("div",{className:"book-authors",children:n.join(", ")})]})},b=function(e){var t=e.books;return Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:e.title}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:t.map((function(t,n){return Object(d.jsx)("li",{children:Object(d.jsx)(j,{book:t,changeShelf:e.changeShelf})},n)}))})})]})},u=n(5),f=function(e){return Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(b,{title:"Currently Reading",books:e.currentlyReading,changeShelf:e.changeShelf}),Object(d.jsx)(b,{title:"Want To Read",books:e.wantToRead,changeShelf:e.changeShelf}),Object(d.jsx)(b,{title:"Read",books:e.read,changeShelf:e.changeShelf})]})}),Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)(u.b,{to:"/search",children:"Add a book"})})]})},O=function(e){var t=Object(c.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1],r=function(t){s(t.target.value),e.onTextEntered(t.target.value)},o=e.searchedBooks;return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)(u.b,{to:"/",className:"close-search",onClick:r}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{onChange:r,type:"text",value:a,placeholder:"Search by title, author, or ISBN"})})]}),Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("ol",{className:"books-grid",children:o&&o.map((function(t,n){return Object(d.jsx)("li",{children:Object(d.jsx)(j,{book:t,changeShelf:e.changeShelf})},n)}))})})]})},p=n(7),x="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:v},m=function(){return fetch("".concat(x,"/books"),{headers:k}).then((function(e){return e.json()})).then((function(e){return e.books}))},g=function(e,t){return fetch("".concat(x,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)(Object(p.a)({},k),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},S=n(2);var y=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(h.a)(s,2),o=r[0],j=r[1],b=Object(c.useState)([]),u=Object(h.a)(b,2),v=u[0],y=u[1],N=Object(c.useState)([]),R=Object(h.a)(N,2),w=R[0],T=R[1],C=Object(c.useState)({}),E=Object(h.a)(C,2),B=E[0],J=E[1];Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,a(t),M(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var M=function(e){var t=[],n=[],c=[],a={};e.forEach((function(e){"read"===e.shelf&&t.push(e),"wantToRead"===e.shelf&&n.push(e),"currentlyReading"===e.shelf&&c.push(e),a[e.id]=e.shelf})),T(t),y(c),j(n),J(a)},A=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,t.shelf);case 2:n.push(t),a(n),M(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(c.useState)([]),q=Object(h.a)(I,2),L=q[0],P=q[1],W=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t,s=void 0,fetch("".concat(x,"/search"),{method:"POST",headers:Object(p.a)(Object(p.a)({},k),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:a,maxResults:s})}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:void 0!==(n=e.sent)&&"empty query"!==n.error?(c=n.map((function(e){return e.id in B?e.shelf=B[e.id]:e.shelf="none",e})),P(c)):P([]);case 4:case"end":return e.stop()}var a,s}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)(S.c,{children:[Object(d.jsx)(S.a,{path:"/",exact:!0,element:Object(d.jsx)(f,{changeShelf:A,read:w,wantToRead:o,currentlyReading:v})}),Object(d.jsx)(S.a,{path:"/search",exact:!0,element:Object(d.jsx)(O,{onTextEntered:W,searchedBooks:L,changeShelf:A})})]})})};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(u.a,{children:Object(d.jsx)(y,{})})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.b42c1c83.chunk.js.map